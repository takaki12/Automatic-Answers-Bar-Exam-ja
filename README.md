# Automatic-Answers-Bar-Exam-ja
日本の司法試験(民法短答式)の自動解答をする  

preprocessingフォルダでは、ファインチューニングするためのデータ処理を行っています。  
・データ例
```
<pair id="R04-01-I" label="N">
<t1>
（未成年者の法律行為）
第五条　未成年者が法律行為をするには、その法定代理人の同意を得なければならない。ただし、単に権利を得、又は義務を免れる法律行為については、この限りでない。
２　前項の規定に反する法律行為は、取り消すことができる。
（未成年者の営業の許可）
第六条　一種又は数種の営業を許された未成年者は、その営業に関しては、成年者と同一の行為能力を有する。
</t1>
<t2>
営業を許された未成年者がした法律行為は、その営業に関しないものであっても、取り消すことができない。
</t2>
</pair>
```　　
load_problems.pyでは、上の例のようなファイルを読み込み、問題番号をキーとして、ラベル、関連条文(<t1>にあたる)と問題文(<t2>)を値とする辞書を作成します。　　
data_augmentation.pyでは、文末表現をあらかじめ設定しておいたペアと書き換えてラベルを反転させる処理(否定形生成)や一部の人物語を置き換える処理(人物語置き換え)をする関数です。　　
```
否定形生成
「その営業に関しては、成年者と同一の行為能力を有 する。」 → 「その営業に関しては、成年者と同一の行為能力を有 しない。」
人物語置き換え
「営業を許された未成年者がした法律行為は、その営業に関しないものであっても、取り消すことができない。」　　
未成年者を置き換える
「営業を許されたAがした法律行為は、その営業に関しないものであっても、取り消すことができない。」
```
select_article.pyでは、条文(<t1>)部分がとても長くなっている場合があります。(512トークンを超えることも)  
この問題に対処するため、複数の条文が指定されていた場合は、条や項ごとに分割して、Sentence-BERT/Sentece-LUKEを用いて文ベクトルを作成し、問題文と分割された条文の類似度を計算し、問題を解くために最も重要となる部分を選択します。  

fine_tuning.pyでBERTやLUKEのような事前学習済みモデルを、用意したデータでファインチューニングし、テストデータに対する結果の予測と正答率判定ができます。
